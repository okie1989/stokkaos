<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manajemen Stok Kaos Polos</title>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/11.2.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore-compat.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        table, th, td {
            border: 1px solid #ddd;
        }
        th, td {
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f9f9f9;
        }
        input, select {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 8px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            opacity: 0.8;
        }
        .hidden {
            display: none;
        }
        .form-container {
            max-width: 500px;
            margin: auto;
        }
        .search-container {
            margin-bottom: 20px;
        }
        .edit-btn {
            background-color: #2196F3;
            margin: 2px;
        }
    </style>
    
    <!-- Firebase Config -->
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAmSWqMZ4Nrc4905V8EEB83oJs0IB0EATQ",
  authDomain: "stok-kaos.firebaseapp.com",
  databaseURL: "https://stok-kaos-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "stok-kaos",
  storageBucket: "stok-kaos.firebasestorage.app",
  messagingSenderId: "423425283384",
  appId: "1:423425283384:web:a6bb4aafa22a6daaac1dcd"
        };
        
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore(app);
    </script>
</head>
<body>

<h2>Manajemen Stok Kaos Polos</h2>

<!-- Form Login -->
<div id="loginForm" class="form-container">
    <h3>Login Admin</h3>
    <label for="username">Username:</label>
    <input type="text" id="username" value="admin" placeholder="Masukkan username">

    <label for="password">Password:</label>
    <input type="password" id="password" placeholder="Masukkan password">

    <button type="button" onclick="login()" style="margin-top: 10px;">Login</button>
</div>

<!-- Form Input Stok -->
<div id="stockInputForm" class="hidden form-container">
    <h3>Input Stok Baru</h3>
    <form id="stockForm">
        <label for="warna">Warna:</label>
        <select id="warna">
            <option value="Putih">Putih</option>
            <option value="Broken White">Broken White</option>
            <option value="Abu Muda">Abu Muda</option>
            <option value="Abu Sedang">Abu Sedang</option>
            <option value="Abu Tua">Abu Tua</option>
            <option value="Hitam Reaktif">Hitam Reaktif</option>
            <option value="Hitam Sulfur">Hitam Sulfur</option>
            <option value="Hitam Supersoft">Hitam Supersoft</option>
            <option value="Charcoal">Charcoal</option>
            <option value="Navy">Navy</option>
            <option value="Hijau Botol">Hijau Botol</option>
            <option value="Hijau Pucuk">Hijau Pucuk</option>
            <option value="Army">Army</option>
            <option value="Sage">Sage</option>
            <option value="Biru Langit">Biru Langit</option>
            <option value="Biru Elektrik">Biru Elektrik</option>
            <option value="Biru Dongker">Biru Dongker</option>
            <option value="Kuning Lemon">Kuning Lemon</option>
            <option value="Kuning Mustard">Kuning Mustard</option>
            <option value="Oranye">Oranye</option>
            <option value="Salmon">Salmon</option>
            <option value="Merah Cabe">Merah Cabe</option>
            <option value="Merah Marun">Merah Marun</option>
            <option value="Coklat Tua">Coklat Tua</option>
            <option value="Coklat Muda">Coklat Muda</option>
            <option value="Pink Muda">Pink Muda</option>
            <option value="Dusty Pink">Dusty Pink</option>
            <option value="Ungu Muda">Ungu Muda</option>
            <option value="Ungu Lavender">Ungu Lavender</option>
            <option value="Toska Muda">Toska Muda</option>
            <option value="Mint">Mint</option>
        </select>
        
        <button type="button" onclick="addStock()">Tambah Stok</button>

        <label for="size">Size:</label>
        <select id="size">
            <option value="XS">XS</option>
            <option value="S">S</option>
            <option value="M">M</option>
            <option value="L">L</option>
            <option value="XL">XL</option>
            <option value="2XL">2XL</option>
            <option value="3XL">3XL</option>
            <option value="4XL">4XL</option>
            <option value="5XL">5XL</option>
            <option value="6XL">6XL</option>
        </select>

        <label for="varian">Varian:</label>
        <select id="varian">
            <option value="ANAK">ANAK</option>
            <option value="DEWASA">DEWASA</option>
        </select>

        <label for="lengan">Lengan:</label>
        <select id="lengan">
            <option value="PENDEK">PENDEK</option>
            <option value="PANJANG">PANJANG</option>
            <option value="3/4">3/4</option>
            <option value="7/8">7/8</option>
            <option value="TANPA LENGAN">TANPA LENGAN</option>
        </select>

        <label for="gramasi">Gramasi:</label>
        <select id="gramasi">
            <option value="30S">30S</option>
            <option value="24S">24S</option>
            <option value="20S">20S</option>
            <option value="16S">16S</option>
        </select>

        <label for="model">Model:</label>
        <select id="model">
            <option value="OBLONG">OBLONG</option>
            <option value="V-NECK">V-NECK</option>
            <option value="KERAH">KERAH</option>
            <option value="RAGLAN">RAGLAN</option>
            <option value="MOTIF">MOTIF</option>
        </select>

        <label for="jenisBahan">Jenis Bahan:</label>
        <select id="jenisBahan">
            <option value="COMBED">COMBED</option>
            <option value="CARDED">CARDED</option>
            <option value="PE">PE</option>
            <option value="TC">TC</option>
            <option value="LAKOS">LAKOS</option>
        </select>

        <label for="jumlah">Jumlah:</label>
        <input type="number" id="jumlah" placeholder="Masukkan jumlah">

        <button type="button" onclick="addStock()">Tambah Stok</button>
    </form>
</div>
    </form>
</div>

<!-- Search Bar -->
<div class="search-container">
    <input type="text" id="searchInput" placeholder="Cari stok..." onkeyup="searchStock()">
</div>

<!-- Tabel Stok -->
<h3>Stok Tersedia</h3>
<table id="stockTable">
    <thead>
        <tr>
            <th>Warna</th>
            <th>Size</th>
            <th>Varian</th>
            <th>Lengan</th>
            <th>Gramasi</th>
            <th>Model</th>
            <th>Jenis Bahan</th>
            <th>Jumlah</th>
            <th>Aksi</th>
        </tr>
    </thead>
    <tbody>
        <!-- Data akan diisi oleh Firebase -->
    </tbody>
</table>

<script>
    // Fungsi Login
    function login() {
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;

        if (username === 'admin' && password === '1234') {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('stockInputForm').classList.remove('hidden');
            loadStocks();
        } else {
            alert('Login gagal!');
        }
    }

    // Fungsi Tambah Stok ke Firebase
    async function addStock() {
        const stockData = {
            warna: document.getElementById('warna').value,
            size: document.getElementById('size').value,
            varian: document.getElementById('varian').value,
            lengan: document.getElementById('lengan').value,
            gramasi: document.getElementById('gramasi').value,
            model: document.getElementById('model').value,
            jenisBahan: document.getElementById('jenisBahan').value,
            jumlah: parseInt(document.getElementById('jumlah').value)
        };

        try {
            await db.collection('stocks').add(stockData);
            document.getElementById('stockForm').reset();
        } catch (error) {
            console.error("Error adding document: ", error);
        }
    }

    // Fungsi Muat Stok dari Firebase
    function loadStocks() {
        db.collection('stocks').onSnapshot((snapshot) => {
            const tbody = document.getElementById('stockTable').getElementsByTagName('tbody')[0];
            tbody.innerHTML = '';
            
            snapshot.forEach(doc => {
                const data = doc.data();
                const row = tbody.insertRow();
                
                row.insertCell().textContent = data.warna;
                row.insertCell().textContent = data.size;
                row.insertCell().textContent = data.varian;
                row.insertCell().textContent = data.lengan;
                row.insertCell().textContent = data.gramasi;
                row.insertCell().textContent = data.model;
                row.insertCell().textContent = data.jenisBahan;
                row.insertCell().textContent = data.jumlah;
                
                const actionCell = row.insertCell();
                const editButton = document.createElement('button');
                editButton.className = 'edit-btn';
                editButton.textContent = 'Edit';
                editButton.onclick = () => editStock(doc.id, data.jumlah);
                actionCell.appendChild(editButton);
            });
        });
    }

    // Fungsi Edit Stok
    async function editStock(docId, currentQty) {
        const newQty = prompt('Masukkan jumlah baru:', currentQty);
        if (newQty !== null) {
            try {
                await db.collection('stocks').doc(docId).update({
                    jumlah: parseInt(newQty)
                });
            } catch (error) {
                console.error("Error updating document: ", error);
            }
        }
    }

    // Fungsi Pencarian
    function searchStock() {
        const input = document.getElementById('searchInput').value.toLowerCase();
        const rows = document.querySelectorAll('#stockTable tbody tr');

        rows.forEach(row => {
            const cells = row.getElementsByTagName('td');
            let showRow = false;
            
            for (let i = 0; i < cells.length - 1; i++) {
                if (cells[i].textContent.toLowerCase().includes(input)) {
                    showRow = true;
                    break;
                }
            }
            
            row.style.display = showRow ? '' : 'none';
        });
    }
</script>

</body>
</html>